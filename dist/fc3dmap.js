!function(e){var i={};function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=0)}([function(e,i,t){"use strict";t.r(i),window.Cesium.Viewer.prototype.addOverlay=function(e){e.setViewer(this),this._container.appendChild(e.element)};var n=function(e){e=e||{};var i=this;this.id=e.id,this.element=e.element,this.position=e.position,this._worldPosition=null,this.offset=e.offset,this.scratch=new Cesium.Cartesian2,this._viewer=null;this.setViewer=function(e){this._viewer=e,i._viewer.scene.preRender.addEventListener(function(){"none"!==i.element.style.display&&i.update()})},this.getViewer=function(){return this._viewer},this.setPosition=function(e){if(e){if(e instanceof Array&&(e[0]=e[0]||0,e[1]=e[1]||0,e[2]=e[2]||0,e=Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2])),i.getViewer()){var t=Cesium.SceneTransforms.wgs84ToWindowCoordinates(i.getViewer().scene,e);Cesium.defined(t)&&(i.element.style.top=t.y+"px",i.element.style.left=t.x+"px",i.show()),i._worldPosition=e}}else i.close()},this.update=function(){this.setPosition(this._worldPosition)},this.getPosition=function(){},this.close=function(){i.element.style.display="none"},this.show=function(){i.element.style.display="block"}};var r={projection:"EPSG:3857",mapUrl:"http://192.168.30.119:86/TDTMap",zoneUrl:"http://192.168.30.119:86/GeoJson/zone.json",sceneUrl:"http://192.168.30.119:8090/iserver/services/3D-3DScene/rest/realspace",initialPosition:[-2320925.7797069647,5395458.786719975,2501247.3783257054],initialOrientation:[9359669324560116e-20,-.6985160026685424,6.283185307179494],mode:"scene",zone:{condition:{sheng:[1e8,100],shi:[1e6,100],xian:[1e5,100]},font:{sheng:"small-caps bold 22px/1 sans-serif",shi:"small-caps bold 18px/1 sans-serif",xian:"small-caps bold 16px/1 sans-serif"},offset:{sheng:-20,shi:-15,xian:-10}}};function o(e){this._url=e.url,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=15;var i=new Cesium.Cartesian2(-20037508.3427892,-20037508.3427892),t=new Cesium.Cartesian2(20037508.3427892,20037508.3427892);this._tilingScheme=new Cesium.WebMercatorTilingScheme({rectangleSouthwestInMeters:i,rectangleNortheastInMeters:t}),this._credit=void 0,this._rectangle=this._tilingScheme.rectangle,this._ready=!0,Cesium.defineProperties(o.prototype,{url:{get:function(){return this._url}},token:{get:function(){return this._token}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){if(!this._ready)throw new DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),o.prototype.getTileCredits=function(e,i,t){},o.prototype.requestImage=function(e,i,t){if(!this._ready)throw new DeveloperError("requestImage must not be called before the imagery provider is ready.");var n=function(e,i,t,n){var r=e._url+"/{z}/{x}/{y}.png";return r=r.replace("{x}",i).replace("{y}",t).replace("{z}",n)}(this,e,i,t);return Cesium.ImageryProvider.loadImage(this,n)}}function s(e,i){i=i||{};let t=this;this.config=i.config||r,this.viewer=null,s.prototype.init=function(){t.createViewer(e,i),t.viewer.scene.open(t.config.sceneUrl).then(function(e){t.viewer.scene.layers.find("bulids").style3D.fillForeColor=new Cesium.Color(.7,.7,.7)}),t.setCameraView(new Cesium.Cartesian3.fromDegrees(104.355,28.705,1e7),new Cesium.HeadingPitchRoll.fromDegrees(0,-90,0));let n=t.config.initialPosition&&new Cesium.Cartesian3(t.config.initialPosition[0],t.config.initialPosition[1],t.config.initialPosition[2]),r=t.config.initialOrientation&&new Cesium.HeadingPitchRoll(t.config.initialOrientation[0],t.config.initialOrientation[1],t.config.initialOrientation[2]);t.flyTo(n,r),t.config.zoneUrl&&function(e,i,t){let n=t,r=new Cesium.BillboardCollection;e.scene.primitives.add(r),Cesium.GeoJsonDataSource.load(i).then(function(i){let t=i.entities.values;for(let e=0;e<t.length;e++){let i=t[e],r=t[e].properties.Level.getValue(),o=t[e].properties.NAME.getValue(),s=null,l=null,a=null;switch(r){case 1:s=n.condition.sheng,l=n.font.sheng,a=n.offset.sheng;break;case 2:s=n.condition.shi,l=n.font.shi,a=n.offset.shi;break;case 3:s=n.condition.xian,l=n.font.xian,a=n.offset.xian}i.name="zone",i.billboard=null,i.label=new Cesium.LabelGraphics({text:o,font:l,outlineWidth:6-r,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,pixelOffset:new Cesium.Cartesian2(0,a),fillColor:Cesium.Color.BLACK,outlineColor:Cesium.Color.WHITE,style:Cesium.LabelStyle.FILL_AND_OUTLINE,distanceDisplayCondition:new Cesium.DistanceDisplayCondition(s[1],s[0])})}e.dataSources.add(i)})}(t.viewer,t.config.zoneUrl,t.config.zone)},s.prototype.TDTMapImageryProvider=o,s.prototype.createViewer=function(e,i){return i=i||{},t.viewer=new Cesium.Viewer(e,{fullscreenButton:i.fullscreenButton||!1,homeButton:i.homeButton||!1,animation:i.animation||!1,baseLayerPicker:i.baseLayerPicker||!1,geocoder:i.geocoder||!1,timeline:i.timeline||!1,sceneModePicker:i.sceneModePicker||!1,navigationHelpButton:i.navigationHelpButton||!1,selectionIndicator:!1,infoBox:!1,imageryProvider:!i.imageryProvider&&t.config.mapUrl&&""!==t.config.mapUrl&&new o({url:t.config.mapUrl})}),t.viewer._cesiumWidget._creditContainer.style.display="none",t.viewer},s.prototype.flyTo=function(e,i,n){e instanceof Array&&(e=new Cesium.Cartesian3(e[0],e[1],e[2])),i instanceof Array&&(i=new Cesium.HeadingPitchRoll(i[0],i[1],i[2])),t.viewer.camera.flyTo({destination:e,orientation:i,complete:n})},s.prototype.fullscreen=function(){Cesium.Fullscreen.requestFullscreen(t.viewer.scene.canvas)},s.prototype.screenshots=function(){t.viewer.scene.outputSceneToFile()},s.prototype.changeMode=function(e){e=e||"scene";let i=t.getPosition(),n=null;switch(e){case"scene":n=new Cesium.HeadingPitchRoll(0,Cesium.Math.toRadians(-90),0),t.flyTo(i,n,function(){t.viewer.scene.mode=Cesium.SceneMode.SCENE2D});break;case"map":t.viewer.scene.mode=Cesium.SceneMode.SCENE3D,n=new Cesium.HeadingPitchRoll(0,Cesium.Math.toRadians(-45),0),t.flyTo(i,n)}},s.prototype.setCameraView=function(e,i){e instanceof Array&&(e=new Cesium.Cartesian3(e[0],e[1],e[2])),i instanceof Array&&(i=new Cesium.HeadingPitchRoll(i[0],i[1],i[2])),t.viewer.camera.setView({destination:e,orientation:i})},s.prototype.getCameraOrientation=function(){let e,i,n;return e=t.viewer.camera.heading,i=t.viewer.camera.pitch,n=t.viewer.camera.roll,new Cesium.HeadingPitchRoll(e,i,n)},s.prototype.getPosition=function(){return t.viewer.camera.position},t.init(),s.prototype.createEntityCollection=function(e){var i=new Cesium.EntityCollection(e);return t.viewer.dataSources.add(i),i},s.prototype.addEntity=function(e,i){e instanceof Cesium.Entity==0&&(e=new Cesium.Entity(e)),i.add(e)},s.prototype.createFeature=function(e,i){var n=null;return(i=t.extend({style:{image:"Build/images/index/drawmark.png",size:null,graph:null,color:null},xField:"x",yField:"y",zField:"z"},i||{})).style.graph?"point"==i.style.graph?n=new Cesium.Entity({id:e.id,position:new Cesium.Cartesian3.fromDegrees(e[i.xField],e[i.yField],e[i.zField]||0),size:i.style.size,color:i.style.color,point:{color:i.style.color,size:8}}):"model"==i.style.graph&&(n=new Cesium.Entity({id:e.id,position:new Cesium.Cartesian3.fromDegrees(e[i.xField],e[i.yField],e[i.zField]||0),model:new Cesium.ModelGraphics({uri:i.style.image,color:i.style.color&&Cesium.Color.fromCssColorString(i.style.color),scale:i.style.scale})})):n=new Cesium.Entity({id:e.id,position:new Cesium.Cartesian3.fromDegrees(e[i.xField],e[i.yField],e[i.zField]||0),billboard:new Cesium.BillboardGraphics({position:new Cesium.Cartesian3.fromDegrees(e[i.xField],e[i.yField],e[i.zField]||0),image:i.style.image||"Build/images/index/drawmark.png",color:new Cesium.Color(1,1,1,1),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM})}),n},s.prototype.createFeatures=function(e,i){for(var n=new Cesium.EntityCollection,r=0;r<e.length;r++)n.add(t.createFeature(e[r],i));return n}}s.prototype.extend=function(e){for(var i=1,t=arguments.length;i<t;i++){var n=arguments[i];if(n)for(var r=Object.keys(n),o=0,s=r.length;o<s;o++){var l=r[o];e[l]=n[l]}}return e};var l=s;window.Fc3dmap=l,window.Cesium.Overlay=n}]);